# https://www.playframework.com/documentation/latest/Configuration

# For examples on additional grpc configurations, take a look at
# https://github.com/playframework/play-scala-grpc-example/blob/2.7.x/conf/application.conf
akka {
    actor.typed.extensions = []

    grpc.client {

//        "helloworld.GreeterService" {
//            host = "example.com"
//            port = 9000
//            use-tls = false
//        }
    }
}

play {
    filters {
        enabled = []
    }

    modules {
        enabled += "modules.AppModule"
        enabled += "modules.DatabaseModule"
//        enabled += "AkkaGrpcClientModule"
        disabled += "play.grpc.ClassicActorsystemProviderModule"
    }

    server {
        http {
            port = $app_port$
        }
    }

    http {
        secret {
            key = "changeme"
            key = \${?APP_SECRET}
        }
    }
}

app {
    database {
        postgresql {
            profile = "$package$.db_utils.CustomPostgresProfile\$"
            db {
                connectionPool = "HikariCP"
                dataSourceClass = "org.postgresql.ds.PGSimpleDataSource"
                properties {
                    url = "jdbc:postgresql://localhost:5432/$name;format="lower,snake"$?stringtype=unspecified"
                    url = \${?APP_DB_URL}
                    user = "postgres"
                    user = \${?APP_DB_USER}
                    password = "postgres"
                    password = \${?APP_DB_PASSWORD}
                }
                numThreads = 10
            }
        }
    }
}
